(()=>{"use strict";function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return e(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return e(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}const n=function(e,n){return n.reduce((function(i,o,r){return r%e==0?[].concat(t(i),[n.slice(r,r+e)]):i}),[])};function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var a="analytics",c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e?(this.id=e,this.init()):this.initEc()}var e,i,r;return e=t,(i=[{key:"init",value:function(){var t,e,n,i,o,r;t=window,e=document,n="script",i="ga",t.GoogleAnalyticsObject=i,t.ga=t.ga||function(){(t.ga.q=t.ga.q||[]).push(arguments)},t.ga.l=1*new Date,o=e.createElement(n),r=e.getElementsByTagName(n)[0],o.async=1,o.src="//www.google-analytics.com/analytics.js",r.parentNode.insertBefore(o,r),ga("create",this.id,{siteSpeedSampleRate:10}),this.initEc(),ga("send","pageview")}},{key:"initEc",value:function(){ga("require","ec")}},{key:"impression",value:function(t){var e=this;n(10,t).map((function(t){t.map((function(t){ga("ec:addImpression",t)})),ga("ec:setAction","detail"),e.event("view_item_list")}))}},{key:"clickItem",value:function(t){ga("ec:addProduct",t),ga("ec:setAction","click",{list:t.list}),this.event("view_item"),this.event("select_content","engagement","product",!1)}},{key:"viewItem",value:function(t){ga("ec:addProduct",t),ga("ec:setAction","detail"),this.event("view_item")}},{key:"addToCart",value:function(t){ga("ec:addProduct",t),ga("ec:setAction","add"),this.event("add_to_cart","ecommerce")}},{key:"removeFromCart",value:function(t){ga("ec:addProduct",t),ga("ec:setAction","remove"),this.event("remove_from_cart","ecommerce")}},{key:"viewPromotion",value:function(t){ga("ec:addPromo",t),ga("ec:setAction","detail"),this.event("view_promotion")}},{key:"clickPromotion",value:function(t){ga("ec:addPromo",t),ga("ec:setAction","promo_click"),this.event("select_content")}},{key:"begin",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t.map((function(t){ga("ec:addProduct",t)})),ga("ec:setAction","checkout",{step:1,coupon:e}),this.event("begin_checkout","ecommerce")}},{key:"progress",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.map((function(t){ga("ec:addProduct",t)})),ga("ec:setAction","checkout",{step:e,coupon:n}),this.event("checkout_progress","ecommerce")}},{key:"option",value:function(t,e){ga("ec:setAction","checkout_option",{step:e,option:t}),this.event("set_checkout_option","ecommerce")}},{key:"purchase",value:function(t,e,n,i,o,r,s){s.map((function(t){ga("ec:addProduct",t)})),ga("set","currencyCode",i),ga("ec:setAction","purchase",{id:t,affiliation:e,revenue:n,tax:o,shipping:r}),this.event("purchase","ecommerce")}},{key:"refund",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.map((function(t){ga("ec:addProduct",t)})),ga("ec:setAction","refund",{id:t}),this.event("refund","ecommerce")}},{key:"event",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"engagement",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s={eventAction:t,eventCategory:e,nonInteractive:i,forceSSL:r};n&&(s=o({eventLabel:n},s)),ga("send","event",s)}}])&&s(e.prototype,i),r&&s(e,r),t}();function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.id=e,this.init())}var e,i,o;return e=t,(i=[{key:"init",value:function(){var t=document.createElement("script");function e(){dataLayer.push(arguments)}t.src="https://www.googletagmanager.com/gtag/js?id=UA-98212043-2",t.async=!0,document.head.appendChild(t),window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",this.id)}},{key:"impression",value:function(t){n(10,t).map((function(t){gtag("event","view_item_list",{list:t})}))}},{key:"clickItem",value:function(t){gtag("event","select_content",{content_type:"product",items:[t]})}},{key:"viewItem",value:function(t){gtag("event","view_item",{items:[t]})}},{key:"addToCart",value:function(t){gtag("event","add_to_cart",{content_type:"product",items:[t]})}},{key:"removeFromCart",value:function(t){gtag("event","remove_from_cart",{content_type:"product",items:[t]})}},{key:"viewPromotion",value:function(t){gtag("event","view_promotion",{promotions:[t]})}},{key:"clickPromotion",value:function(t){gtag("event","select_content",{promotions:[t]})}},{key:"begin",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;gtag("event","begin_checkout",{items:t,coupon:e})}},{key:"progress",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;gtag("event","checkout_progress",{checkout_step:e,items:t,coupon:n})}},{key:"option",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"description";gtag("event","set_checkout_option",{checkout_step:e,checkout_option:n,value:t})}},{key:"purchase",value:function(t,e,n,i,o,r,s){gtag("event","purchase",{transaction_id:t,affiliation:e,value:n,currency:i,tax:o,shipping:r,items:s})}},{key:"refund",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];gtag("event","refund",{transaction_id:t,items:e})}}])&&u(e.prototype,i),o&&u(e,o),t}();function h(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var f="list[name]",v="checkout[step]";const g=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.storageKey="ga-tracker-storage",this.init()}var e,n,i;return e=t,(n=[{key:"read",value:function(){return JSON.parse(localStorage.getItem(this.storageKey))}},{key:"write",value:function(t){return localStorage.setItem(this.storageKey,JSON.stringify(t)),this}},{key:"init",value:function(){return this.json=this.read()||{},this.write(this.json),this}},{key:"setKey",value:function(t,e){return this.json[t]=e,this.write(this.json)}},{key:"getKey",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.json[t]||e}}])&&h(e.prototype,n),i&&h(e,i),t}();function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}const y=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.storage=new g,this.storageKeyName="".concat("item[list][name]","[").concat(e.id,"]"),this.storageKeyPosition="".concat("item[list][position]","[").concat(e.id,"]"),this.driver=n,this.json={},this.setJson(e),this.list=this.storage.getKey(this.storageKeyName,this.storage.getKey(f,this.list)),this.position=this.storage.getKey(this.storageKeyPosition,this.position)}var e,n,i;return e=t,(n=[{key:"getJson",value:function(){return this.json}},{key:"setJson",value:function(t){var e=this;return Object.keys(t).map((function(n){return e[n]=t[n]})),this}},{key:"click",value:function(){return this.driver.clickItem(this.json),this}},{key:"impression",value:function(){return this.driver.viewItem(this.json),this}},{key:"setPosition",value:function(t){this.storage.setKey(this.storageKeyPosition,t);var e=this.driver instanceof c?"position":"list_position";this.json[e]=t}},{key:"getPosition",value:function(){var t=this.driver instanceof c?"position":"list_position";return this.json[t]}},{key:"setList",value:function(t){this.storage.setKey(this.storageKeyName,t);var e=this.driver instanceof c?"list":"list_name";this.json[e]=t}},{key:"getList",value:function(){var t=this.driver instanceof c?"list":"list_name";return this.json[t]}},{key:"id",get:function(){return this.json.id},set:function(t){this.json.id=t}},{key:"name",get:function(){return this.json.name},set:function(t){this.json.name=t}},{key:"list",get:function(){return this.getList()},set:function(t){this.setList(t)}},{key:"list_name",get:function(){return this.getList()},set:function(t){this.setList(t)}},{key:"brand",get:function(){return this.json.brand},set:function(t){this.json.brand=t}},{key:"category",get:function(){return this.json.category},set:function(t){this.json.category=t}},{key:"variant",get:function(){return this.json.variant},set:function(t){this.json.variant=t}},{key:"position",get:function(){return this.getPosition()},set:function(t){this.setPosition(t)}},{key:"list_position",get:function(){return this.getPosition()},set:function(t){this.setPosition(t)}},{key:"price",get:function(){return this.json.price},set:function(t){this.json.price=t}},{key:"quantity",get:function(){return this.json.quantity},set:function(t){this.json.quantity=t}},{key:"coupon",get:function(){return this.json.coupon},set:function(t){this.json.coupon=t}}])&&d(e.prototype,n),i&&d(e,i),t}();function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}const k=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1?arguments[1]:void 0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;p(this,t),this.list=[],this.driver=i,this.storage=new g,this.setListName(o||this.storage.getKey(f)),n.map((function(t){return e.addJson(t)}))}var e,n,i;return e=t,(n=[{key:"getJson",value:function(){return this.list.map((function(t){return t.getJson()}))}},{key:"getProduct",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id";return this.list.find((function(n){return n.getJson()[e]===t}))}},{key:"addJson",value:function(t){if(t instanceof y)throw"Invalid type, item must be simple object";this.addProduct(new y(t,this.driver))}},{key:"addProduct",value:function(t){!this.listName&&t.list?this.setListName(t.list):t.list=this.listName,this.list.push(t)}},{key:"impression",value:function(){this.driver.impression(this.getJson())}},{key:"setListName",value:function(t){this.listName=t,this.storage.setKey(f,t)}}])&&m(e.prototype,n),i&&m(e,i),t}();function b(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}const w=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.driver=e,this.items=[]}var e,n,i;return e=t,(n=[{key:"add",value:function(t){this.items.push(t),this.driver.addToCart(t.getJson())}},{key:"remove",value:function(t){this.items=this.getItems().filter((function(e){return e.getJson().id!==t.getJson().id})),this.driver.removeFromCart(t.getJson())}},{key:"getItems",value:function(){return this.items}},{key:"getItemsJson",value:function(){return this.items.map((function(t){return t.getJson()}))}},{key:"countItems",value:function(){var t=0;return this.getItems().map((function(e){t+=e.getJson().quantity||1})),t}}])&&b(e.prototype,n),i&&b(e,i),t}();function j(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}const _=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.json={},this.driver=n,this.setJson(e)}var e,n,i;return e=t,(n=[{key:"impression",value:function(){this.driver.viewPromotion(this.json)}},{key:"click",value:function(){this.driver.clickPromotion(this.json)}},{key:"getJson",value:function(){return this.json}},{key:"setJson",value:function(t){var e=this;Object.keys(t).map((function(n){return e[n]=t[n]}))}},{key:"id",get:function(){return this.json.id},set:function(t){this.json.id=t}},{key:"name",get:function(){return this.json.name},set:function(t){this.json.name=t}},{key:"creative",get:function(){var t=this.driver instanceof c?"creative":"creative_name";return this.json[t]},set:function(t){var e=this.driver instanceof c?"creative":"creative_name";this.json[e]=t}},{key:"creative_name",get:function(){var t=this.driver instanceof c?"creative":"creative_name";return this.json[t]},set:function(t){var e=this.driver instanceof c?"creative":"creative_name";this.json[e]=t}},{key:"position",get:function(){var t=this.driver instanceof c?"position":"creative_slot";return this.json[t]},set:function(t){var e=this.driver instanceof c?"position":"creative_slot";this.json[e]=t}},{key:"creative_slot",get:function(){var t=this.driver instanceof c?"position":"creative_slot";return this.json[t]},set:function(t){var e=this.driver instanceof c?"position":"creative_slot";this.json[e]=t}}])&&j(e.prototype,n),i&&j(e,i),t}();function P(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}const O=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.storage=new g,this.driver=e,this.stepKey="".concat(v,"[").concat(window.location.pathname,"]"),this.lastStep=this.storage.getKey(v,1),this.storedStep=this.storage.getKey(this.stepKey)}var e,n,i;return e=t,(n=[{key:"begin",value:function(){return this.lastStep=1,this.storedStep=1,this.storage.setKey(this.stepKey,1),this.storage.setKey(v,1),this.driver.begin(this.getItems()),this}},{key:"progress",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.storedStep?t&&(this.lastStep++,this.storedStep=t,this.storage.setKey(this.stepKey,this.storedStep),this.storage.setKey(v,this.lastStep)):(this.lastStep++,this.storedStep=this.lastStep,this.storage.setKey(this.stepKey,this.storedStep),this.storage.setKey(v,this.lastStep)),this.driver.progress(this.getItems(),this.storedStep),this}},{key:"option",value:function(t,e){this.driver.option(t,this.step,e)}},{key:"purchase",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return this.driver.purchase(t,e,n,i,o,r,this.items),this}},{key:"setItems",value:function(t){return this.items=t,this}},{key:"getItems",value:function(){return this.items}}])&&P(e.prototype,n),i&&P(e,i),t}();function K(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}const S=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.driver=e}var e,n,i;return e=t,(n=[{key:"refund",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.driver.refund(t,e),this}}])&&K(e.prototype,n),i&&K(e,i),t}();function I(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}const A=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.driver=e}var e,n,i;return e=t,(n=[{key:"collection",value:function(t){return new k(t,this.driver)}},{key:"product",value:function(t){return new y(t,this.driver)}},{key:"cart",value:function(){return new w(this.driver)}},{key:"promotion",value:function(t){return new _(t,this.driver)}},{key:"checkout",value:function(){return new O(this.driver)}},{key:"refund",value:function(){return new S(this.driver)}}])&&I(e.prototype,n),i&&I(e,i),t}();var J=function(t,e){switch(e=e||a){case a:return new A(new c(t));default:return new A(new l(t))}};window.GaTracker=J})();